# GitHub Actions ワークフロー

## 概要
このディレクトリには、CI/CDパイプラインのワークフロー定義が含まれています。

## ワークフローファイル

### ci.yml
最適化された統合CI/CDパイプライン。以下の特徴があります：

- **並列実行**: Lint、型チェック、セキュリティチェックを並列実行
- **テストの分割**: テストを5つのグループに分割して並列実行
  - unit: ユニットテスト
  - integration: 統合テストと最適化テスト
  - monitoring: モニタリングシステムのテスト
  - tenhou: 天鳳フォーマット関連のテスト
  - ai: AI/ML関連のテスト
- **効率的なキャッシング**: uvのキャッシュを最適化
- **条件付き実行**: ビルドテストはメインブランチのみ


## パフォーマンス最適化のポイント

1. **依存関係キャッシュ**: `prepare-cache`ジョブで一度だけキャッシュキーを生成
2. **並列実行**: 独立したジョブは同時に実行
3. **fail-fast: false**: 一部のテストが失敗しても他のテストを継続
4. **最小限の依存関係**: 各ジョブで必要な依存関係のみインストール
5. **条件付きステップ**: 不要なステップはスキップ

## トラブルシューティング

### テストがタイムアウトする場合
- `DISABLE_MONITORING_AUTO_INIT=1`環境変数が設定されているか確認
- テストグループの分割を見直す

### キャッシュが効かない場合
- `uv.lock`ファイルが更新されているか確認
- キャッシュキーが正しく生成されているか確認

### 依存関係のインストールが遅い場合
- システム依存関係を最小限に抑える
- 不要な開発依存関係を削除する
